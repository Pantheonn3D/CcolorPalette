[build]
  command = "npm run build"
  publish = "dist"
  functions = "netlify/functions"

[[edge_functions]]
path = "/*"
function = "inject-og"

[[edge_functions]]
  function = "bot-logger"  # Must match the filename (without .js)
  path = "/*"              # Must be "/*" to catch the homepage

[[redirects]]
  from = "/sitemap.xml"
  to = "/sitemap.xml"
  status = 200

[[redirects]]
  from = "/robots.txt"
  to = "/robots.txt"
  status = 200

[[redirects]]
  from = "/favicon.ico"
  to = "/favicon.ico"
  status = 200

# SPA fallback, must be last
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
